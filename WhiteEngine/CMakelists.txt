cmake_minimum_required(VERSION 3.15...3.31)
project(WhiteEngine)

# Set C++ standard
set(CMAKE_CXX_STANDARD 23)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# add source files
file(GLOB_RECURSE SOURCE_FILES
	${CMAKE_SOURCE_DIR}/src/*.cpp
	${CMAKE_SOURCE_DIR}/src/*.c)

# add header files
file(GLOB_RECURSE HEADER_FILES
	${CMAKE_SOURCE_DIR}/src/*.hpp
	${CMAKE_SOURCE_DIR}/src/*.h)

# Add GLAD
add_library(glad STATIC include/glad/src/glad.c)
target_include_directories(glad PUBLIC include/glad/include)

# Add GLFW
add_subdirectory(include/glfw)

# Find OpenGL
find_package(OpenGL REQUIRED)

# Add GLM
set(GLM_INCLUDE_DIRS "include/glm")
include_directories(${GLM_INCLUDE_DIRS})

# Add stb
set(STB_IMAGE_INCLUDE_DIRS "include/stb")
include_directories(${STB_IMAGE_INCLUDE_DIRS})
add_compile_definitions(STB_IMAGE_IMPLEMENTATION)

# Add Assimp
# Set the path to the Assimp library
set(ASSIMP_DIR "include/assimp")

# Specify the include directory for Assimp
include_directories(${ASSIMP_DIR}/include)

# Specify the library directory for Assimp
link_directories(${ASSIMP_DIR}/lib)

# Add executable
add_executable(WhiteEngine  ${SOURCE_FILES} ${HEADER_FILES})

# copy res folder to build directory
add_custom_target(copy_resources ALL
        COMMAND ${CMAKE_COMMAND} -E copy_directory
        ${PROJECT_SOURCE_DIR}/res
        ${PROJECT_BINARY_DIR}/res
        COMMENT "Copying resources into build directory")

add_dependencies(WhiteEngine copy_resources)

# Link libraries
target_link_libraries(WhiteEngine PRIVATE glad glfw OpenGL::GL assimp-vc143-mtd)